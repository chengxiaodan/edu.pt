!function(n){n.fn.pagepiling=function(e){function t(){var e=destination.index(".pp-section");return n(".pp-section.active").index(".pp-section")<e?"down":"up"}function o(o,i){var s=n(".pp-section.active"),c=o.data("anchor"),r=o.index(".pp-section"),p=t(o),l=s.index(".pp-section")+1;if("undefined"==typeof i&&(i=!0),"undefined"!=typeof c&&e.anchors.length&&(location.hash=c),o.addClass("active").siblings().removeClass("active"),s.index(".pp-section")<r){var d="translate3d(0px, -100%, 0px)",u="-100%",f=n(".pp-section").map(function(e){if(e<o.index(".pp-section"))return n(this)});e.css3||f.each(function(e){e!=s.index(".pp-section")&&n(this).css({top:u})});var h=s,m=function(){}}else d="translate3d(0px, 0px, 0px)",u="0",f=n(".pp-section").map(function(e){if(e>o.index(".pp-section"))return n(this)}),h=o,m=function(){f.each(function(e){n(this).css({top:u})})};var S=function(){n.isFunction(e.afterLoad)&&e.afterLoad.call(this,c,r+1)};n.isFunction(e.onLeave)&&e.onLeave.call(this,l,r+1,p),e.css3?(a(h,d,i),f.each(function(){a(n(this),d,i)}),setTimeout(function(){S()},e.scrollingSpeed)):i?h.animate({top:u},e.scrollingSpeed,e.easing,function(){m(),S()}):(h.css("top",u),setTimeout(function(){m(),S()},400)),g(c),v(c,r),w=c,x=(new Date).getTime()}function i(){return(new Date).getTime()-x<600+e.scrollingSpeed}function a(n,e,t){n.toggleClass("pp-easing",t),n.css({"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,transform:e})}function s(e){if(!i()){e=window.event||e,e=Math.max(-1,Math.min(1,e.wheelDelta||-e.deltaY||-e.detail));var t=n(".pp-section.active"),t=r(t);return 0>e?c("down",t):c("up",t),!1}}function c(e,t){if("down"==e)var o="bottom",i=n.fn.pagepiling.moveSectionDown;else o="top",i=n.fn.pagepiling.moveSectionUp;if(0<t.length){if(!isScrolled(o,t))return!0;i()}else i()}function r(n){return scrollable=n.find(".pp-scrollable")}function t(e){var t=n(".pp-section.active").index(".pp-section");return e=e.index(".pp-section"),t>e?"up":"down"}function p(){return window.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function l(n){var e=[];return window.navigator.msPointerEnabled?(e.y=n.pageY,e.x=n.pageX):(e.y=n.touches[0].pageY,e.x=n.touches[0].pageX),e}function d(n){touchStartY=l(n.originalEvent).y}function u(t){var o=t.originalEvent;t.preventDefault(),f(t.target)||(t=n(".pp-section.active"),t=r(t),i()||(o=l(o),touchEndY=o.y,touchEndX=o.x,Math.abs(touchStartY-touchEndY)>S.height()/100*e.touchSensitivity&&(touchStartY>touchEndY?c("down",t):touchEndY>touchStartY&&c("up",t))))}function f(t,o){o=o||0;var i=n(t).parent();return!!(o<e.normalScrollElementTouchThreshold&&i.is(e.normalScrollElements))||o!=e.normalScrollElementTouchThreshold&&f(i,++o)}function h(){n("body").append('<div id="pp-nav"><ul></ul></div>');var t=n("#pp-nav");t.css("color",e.navigation.textColor),t.addClass(e.navigation.position);for(var o=0;o<n(".pp-section").length;o++){var i="";if(e.anchors.length&&(i=e.anchors[o]),"undefined"!=typeof e.navigation.tooltips){var a=e.navigation.tooltips[o];"undefined"==typeof a&&(a="")}t.find("ul").append('<li data-tooltip="'+a+'"><a href="#'+i+'"><span></span></a></li>')}t.find("span").css("border-color",e.navigation.bulletsColor)}function v(t,o){e.navigation&&(n("#pp-nav").find(".active").removeClass("active"),t?n("#pp-nav").find('a[href="#'+t+'"]').addClass("active"):n("#pp-nav").find("li").eq(o).find("a").addClass("active"))}function g(t){e.menu&&(n(e.menu).find(".active").removeClass("active"),n(e.menu).find('[data-menuanchor="'+t+'"]').addClass("active"))}function m(){var n,e=document.createElement("p"),t={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var o in t)void 0!==e.style[o]&&(e.style[o]="translate3d(1px,1px,1px)",n=window.getComputedStyle(e).getPropertyValue(t[o]));return document.body.removeChild(e),void 0!==n&&0<n.length&&"none"!==n}var w,S=n(this),x=0,b="ontouchstart"in window||0<navigator.msMaxTouchPoints;e=n.extend({menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"swing",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:["section1","section2","section3","section4"]},normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},e),n.fn.pagepiling.setScrollingSpeed=function(n){e.scrollingSpeed=n},n.fn.pagepiling.setMouseWheelScrolling=function(n){n?S.get(0).addEventListener?(S.get(0).addEventListener("mousewheel",s,!1),S.get(0).addEventListener("wheel",s,!1)):S.get(0).attachEvent("onmousewheel",s):S.get(0).addEventListener?(S.get(0).removeEventListener("mousewheel",s,!1),S.get(0).removeEventListener("wheel",s,!1)):S.get(0).detachEvent("onmousewheel",s)},n.fn.pagepiling.setAllowScrolling=function(e){e?(n.fn.pagepiling.setMouseWheelScrolling(!0),b&&(MSPointer=p(),S.off("touchstart "+MSPointer.down).on("touchstart "+MSPointer.down,d),S.off("touchmove "+MSPointer.move).on("touchmove "+MSPointer.move,u))):(n.fn.pagepiling.setMouseWheelScrolling(!1),b&&(MSPointer=p(),S.off("touchstart "+MSPointer.down),S.off("touchmove "+MSPointer.move)))},n.fn.pagepiling.setKeyboardScrolling=function(n){e.keyboardScrolling=n},n.fn.pagepiling.moveSectionUp=function(){var t=n(".pp-section.active").prev(".pp-section");!t.length&&e.loopTop&&(t=n(".pp-section").last()),t.length&&o(t)},n.fn.pagepiling.moveSectionDown=function(){var t=n(".pp-section.active").next(".pp-section");!t.length&&e.loopBottom&&(t=n(".pp-section").first()),t.length&&o(t)},n.fn.pagepiling.moveTo=function(e){var t="",t=isNaN(e)?n('[data-anchor="'+e+'"]'):n(".pp-section").eq(e-1);0<t.length&&o(t)},n(e.sectionSelector).each(function(){n(this).addClass("pp-section")}),e.css3&&(e.css3=m()),n(S).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),n.fn.pagepiling.setAllowScrolling(!0),n.isEmptyObject(e.navigation)||h();var y=n(".pp-section").length;n(".pp-section").each(function(t){n(this).data("data-index",t),n(this).css("z-index",y),t||0!==n(".pp-section.active").length||n(this).addClass("active"),"undefined"!=typeof e.anchors[t]&&n(this).attr("data-anchor",e.anchors[t]),"undefined"!=typeof e.sectionsColor[t]&&n(this).css("background-color",e.sectionsColor[t]),e.verticalCentered&&n(this).addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />'),y-=1}).promise().done(function(){e.navigation&&(n("#pp-nav").css("margin-top","-"+n("#pp-nav").height()/2+"px"),n("#pp-nav").find("li").eq(n(".pp-section.active").index(".pp-section")).find("a").addClass("active")),n(window).on("load",function(){var t=window.location.hash.replace("#",""),t=n('.pp-section[data-anchor="'+t+'"]');0<t.length&&o(t,e.animateAnchor)}),n.isFunction(e.afterRender)&&e.afterRender.call(this)}),n(window).on("hashchange",function(){var e=window.location.hash.replace("#","").split("/")[0];e.length&&e&&e!==w&&(e=isNaN(e)?n('[data-anchor="'+e+'"]'):n(".pp-section").eq(e-1),o(e))}),n(document).keydown(function(t){if(e.keyboardScrolling&&!i())switch(t.which){case 38:case 33:n.fn.pagepiling.moveSectionUp();break;case 40:case 34:n.fn.pagepiling.moveSectionDown();break;case 36:n.fn.pagepiling.moveTo(1);break;case 35:n.fn.pagepiling.moveTo(n(".pp-section").length);break;case 37:n.fn.pagepiling.moveSlideLeft();break;case 39:n.fn.pagepiling.moveSlideRight()}}),n(document).on("click touchstart","#pp-nav a",function(e){e.preventDefault(),e=n(this).parent().index(),o(n(".pp-section").eq(e))}),n(document).on({mouseenter:function(){var t=n(this).data("tooltip");n('<div class="pp-tooltip '+e.navigation.position+'">'+t+"</div>").hide().appendTo(n(this)).fadeIn(200)},mouseleave:function(){n(this).find(".pp-tooltip").fadeOut(200,function(){n(this).remove()})}},"#pp-nav li")}}(jQuery);